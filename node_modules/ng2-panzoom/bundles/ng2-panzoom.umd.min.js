!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs")):"function"==typeof define&&define.amd?define("ng2-panzoom",["exports","@angular/core","rxjs"],t):t((e=e||self)["ng2-panzoom"]={},e.ng.core,e.rxjs)}(this,function(e,t,n){"use strict";var i=function(){return function(e){void 0===e&&(e=null),this.zoomLevels=5,this.neutralZoomLevel=2,this.scalePerZoomLevel=2,this.initialZoomLevel=this.neutralZoomLevel,this.friction=10,this.haltSpeed=100,this.initialPanX=0,this.initialPanY=0,this.initialZoomToFit=null,this.keepInBounds=!1,this.keepInBoundsDragPullback=.7,this.keepInBoundsRestoreForce=.5,this.panOnClickDrag=!0,this.dragMouseButton="left",this.zoomButtonIncrement=1,this.zoomOnDoubleClick=!0,this.zoomOnMouseWheel=!0,this.invertMouseWheel=!1,this.zoomStepDuration=.2,this.zoomToFitZoomLevelFactor=.95,this.freeMouseWheel=!0,this.freeMouseWheelFactor=.08,this.noDragFromElementClass=null,this.modelChanged=new n.BehaviorSubject({isPanning:null,zoomLevel:null,pan:{x:null,y:null}}),this.api=new n.BehaviorSubject({model:null,config:null,changeZoomLevel:null,zoomIn:null,zoomOut:null,zoomToFit:null,getViewPosition:null,getModelPosition:null,resetView:null,panToPoint:null,panDelta:null,panDeltaPercent:null,panDeltaAbsolute:null}),e&&("zoomLevels"in e&&(this.zoomLevels=e.zoomLevels),"neutralZoomLevel"in e&&(this.neutralZoomLevel=e.neutralZoomLevel),"scalePerZoomLevel"in e&&(this.scalePerZoomLevel=e.scalePerZoomLevel),"initialZoomLevel"in e&&(this.initialZoomLevel=e.initialZoomLevel),"friction"in e&&(this.friction=e.friction),"haltSpeed"in e&&(this.haltSpeed=e.haltSpeed),"initialPanX"in e&&(this.initialPanX=e.initialPanX),"initialPanY"in e&&(this.initialPanY=e.initialPanY),"initialZoomToFit"in e&&(this.initialZoomToFit=e.initialZoomToFit),"keepInBounds"in e&&(this.keepInBounds=e.keepInBounds),"keepInBoundsDragPullback"in e&&(this.keepInBoundsDragPullback=e.keepInBoundsDragPullback),"keepInBoundsRestoreForce"in e&&(this.keepInBoundsRestoreForce=e.keepInBoundsRestoreForce),"panOnClickDrag"in e&&(this.panOnClickDrag=e.panOnClickDrag),"dragMouseButton"in e&&(this.dragMouseButton=e.dragMouseButton),"zoomButtonIncrement"in e&&(this.zoomButtonIncrement=e.zoomButtonIncrement),"zoomOnDoubleClick"in e&&(this.zoomOnDoubleClick=e.zoomOnDoubleClick),"zoomOnMouseWheel"in e&&(this.zoomOnMouseWheel=e.zoomOnMouseWheel),"invertMouseWheel"in e&&(this.invertMouseWheel=e.invertMouseWheel),"zoomStepDuration"in e&&(this.zoomStepDuration=e.zoomStepDuration),"zoomToFitZoomLevelFactor"in e&&(this.zoomToFitZoomLevelFactor=e.zoomToFitZoomLevelFactor),"freeMouseWheel"in e&&(this.freeMouseWheel=e.freeMouseWheel),"freeMouseWheelFactor"in e&&(this.freeMouseWheelFactor=e.freeMouseWheelFactor),this.keepInBounds&&0!==this.neutralZoomLevel&&console.warn("You have set keepInBounds to true and neutralZoomLevel to "+this.neutralZoomLevel+". Be aware that the zoom level cannot go below "+this.neutralZoomLevel),"noDragFromElementClass"in e&&(this.noDragFromElementClass=e.noDragFromElementClass))}}(),o=function(){function e(e,t){var n=this;this.el=e,this.zone=t,this.previousPosition=null,this.isDragging=!1,this.panVelocity=null,this.animationParams=null,this.lastTick=0,this.isChrome=!1,this.willChangeNextFrame=!0,this.isMobile=!1,this.isFirstSync=!0,this.zoomLevelIsChanging=!1,this.dragFinishing=!1,this.dragMouseButton=null,this.onMouseWheel=function(e){if(e&&e.pageX&&e.pageY){var t=e.deltaY;if(n.config.zoomOnMouseWheel){if(n.animationParams)return;n.config.invertMouseWheel||(t=-t);var i={x:e.pageX-n.jQueryFrameElement.offset().left,y:e.pageY-n.jQueryFrameElement.offset().top};n.lastClickPoint=i,n.config.freeMouseWheel?n.freeZoom(i,t):t<0?n.zoomIn(i):t>0&&n.zoomOut(i)}}},this.onMousedown=function(e){if(!n.config.noDragFromElementClass||!n.isParentElement(n.config.noDragFromElementClass,e.srcElement))return e.button===n.dragMouseButton||"touchstart"===e.type?(e.preventDefault(),n.dragFinishing=!1,n.panVelocity=null,n.config.panOnClickDrag&&(n.previousPosition={x:e.pageX,y:e.pageY},n.lastMouseEventTime=e.timeStamp,n.isDragging=!0,n.model.isPanning=!1,n.isMobile?(n.zone.runOutsideAngular(function(){return document.addEventListener("touchend",n.onTouchEnd,!1)}),n.zone.runOutsideAngular(function(){return document.addEventListener("touchmove",n.onTouchMove,{passive:!0,capture:!1})})):(n.zone.runOutsideAngular(function(){return document.addEventListener("mousemove",n.onMouseMove,{passive:!0,capture:!1})}),n.zone.runOutsideAngular(function(){return document.addEventListener("mouseup",n.onMouseUp)}))),!1):void 0},this.onTouchStart=function(e){if(e.preventDefault(),1!==e.touches.length){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY;n.previousPosition={length:t*t+i*i}}n.onMousedown(e)},this.onMouseMove=function(e){if(e&&e.pageX&&e.pageY){var t=e.timeStamp,i=(t-n.lastMouseEventTime)/1e3;n.lastMouseEventTime=t;var o={x:e.pageX-n.previousPosition.x,y:e.pageY-n.previousPosition.y};if(n.config.keepInBounds){var a=n.getViewPosition({x:0,y:0}),s=n.getViewPosition({x:n.contentWidth,y:n.contentHeight});a.x>0&&o.x>0&&(o.x*=Math.min(1,Math.pow(a.x,-n.config.keepInBoundsDragPullback))),a.y>0&&o.y>0&&(o.y*=Math.min(1,Math.pow(a.y,-n.config.keepInBoundsDragPullback))),s.x<n.contentWidth&&o.x<0&&(o.x*=Math.min(1,Math.pow(n.contentWidth-s.x,-n.config.keepInBoundsDragPullback))),s.y<n.contentHeight&&o.y<0&&(o.y*=Math.min(1,Math.pow(n.contentHeight-s.y,-n.config.keepInBoundsDragPullback)))}var l=o.x||0,r=o.y||0;n.model.pan.x+=l,n.model.pan.y+=r,n.syncBaseToModel(),n.animationTick(performance.now()),n.model.isPanning||(n.panzoomOverlayRef.nativeElement.style.display="block"),n.model.isPanning=!0,n.panVelocity={x:o.x/i,y:o.y/i},n.previousPosition={x:e.pageX,y:e.pageY}}},this.onTouchMove=function(e){if(1===e.touches.length)n.onMouseMove(e);else{var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,o=t*t+i*i,a=o-n.previousPosition.length;if(Math.abs(a)<100)return;var s=e.touches[1].pageX+t/2,l=e.touches[1].pageY+i/2,r={x:s-n.jQueryFrameElement.offset().left,y:l-n.jQueryFrameElement.offset().top};n.lastClickPoint=r,n.changeZoomLevel(n.base.zoomLevel+1e-4*a,r),n.previousPosition={length:o}}},this.onMouseUp=function(e){if(e.button===n.dragMouseButton){e.preventDefault();var t=(e.timeStamp-n.lastMouseEventTime)/1e3;if(!n.panVelocity||0===n.panVelocity.x&&0===n.panVelocity.y)n.dragFinishing=!1,n.panVelocity=null;else{var i=Math.max(0,-.2+Math.pow(t+1,-4));n.panVelocity.x*=i,n.panVelocity.y*=i,n.dragFinishing=!0,n.zone.runOutsideAngular(function(){return n.animationId=n.animationFrameFunc(n.animationTick)})}n.isDragging=!1,n.isMobile?(n.zone.runOutsideAngular(function(){return document.removeEventListener("touchend",n.onTouchEnd)}),n.zone.runOutsideAngular(function(){return document.removeEventListener("touchmove",n.onTouchMove,{passive:!0,capture:!1})})):(n.zone.runOutsideAngular(function(){return document.removeEventListener("mousemove",n.onMouseMove,{passive:!0,capture:!1})}),n.zone.runOutsideAngular(function(){return document.removeEventListener("mouseup",n.onMouseUp,{passive:!0})})),n.panzoomOverlayRef.nativeElement.style.display="none"}},this.onTouchEnd=function(e){n.onMouseUp(e)},this.onDblClick=function(e){if(e.preventDefault(),n.config.zoomOnDoubleClick){var t={x:e.pageX-n.jQueryFrameElement.offset().left,y:e.pageY-n.jQueryFrameElement.offset().top};n.lastClickPoint=t,n.zoomIn(t)}},this.preventDefault=function(e){e.preventDefault()},this.animationTick=function(e){var t=0;if(0!==n.lastTick&&(t=e-n.lastTick),n.lastTick=e,n.animationParams&&(n.animationParams.progress+=Math.abs(t/n.animationParams.duration),n.animationParams.progress>=1&&(n.animationParams.progress=1,n.updateDOM(),n.animationParams=null)),n.panVelocity&&n.dragFinishing)for(t>0&&(t/=1e3);t>0;){var i=Math.min(.02,t);if(t-=i,n.model.pan.x=n.model.pan.x+n.panVelocity.x*i,n.panVelocity.x=n.panVelocity.x*(1-n.config.friction*i),n.model.pan.y=n.model.pan.y+n.panVelocity.y*i,n.panVelocity.y=n.panVelocity.y*(1-n.config.friction*i),n.length(n.panVelocity)<n.config.haltSpeed){n.model.isPanning=!1,n.panVelocity=null,n.dragFinishing=!1;break}}if(n.config.keepInBounds||n.dragFinishing){var o=n.getViewPosition({x:0,y:0}),a=n.getViewPosition({x:n.contentWidth,y:n.contentHeight});o.x>0&&(n.base.pan.x-=n.config.keepInBoundsRestoreForce*o.x),o.y>0&&(n.base.pan.y-=n.config.keepInBoundsRestoreForce*o.y),a.x<n.contentWidth&&(n.base.pan.x-=n.config.keepInBoundsRestoreForce*(a.x-n.contentWidth)),a.y<n.contentHeight&&(n.base.pan.y-=n.config.keepInBoundsRestoreForce*(a.y-n.contentHeight))}if(n.updateDOM(),n.config.modelChanged.next(n.model),n.animationParams||n.panVelocity&&n.dragFinishing)n.isChrome&&n.zoomLevelIsChanging&&(n.willChangeNextFrame?n.acceleratedFrameRef.nativeElement.style.willChange="auto":n.acceleratedFrameRef.nativeElement.style.willChange="transform",n.willChangeNextFrame=!n.willChangeNextFrame),n.animationFrameFunc(n.animationTick);else{if(n.panVelocity&&!n.dragFinishing)return;n.syncBaseToModel(),n.scale=n.getCssScale(n.base.zoomLevel),n.willChangeNextFrame=!0,n.acceleratedFrameRef.nativeElement.style.willChange="transform",n.zoomLevelIsChanging=!1,n.lastTick=0}}}return e.prototype.ngOnInit=function(){var e=this;if(this.config.initialZoomToFit?this.base=this.calcZoomToFit(this.config.initialZoomToFit):this.base={zoomLevel:this.config.initialZoomLevel,pan:{x:this.config.initialPanX,y:this.config.initialPanY}},this.model={zoomLevel:this.base.zoomLevel,isPanning:!1,pan:{x:this.base.pan.x,y:this.base.pan.y}},this.config.modelChanged.next(this.model),this.api={model:this.model,config:this.config,changeZoomLevel:this.zoomToLevelAndPoint.bind(this),zoomIn:this.zoomInToLastClickPoint.bind(this),zoomOut:this.zoomOutFromLastClickPoint.bind(this),zoomToFit:this.zoomToFit.bind(this),resetView:this.resetView.bind(this),getViewPosition:this.getViewPosition.bind(this),getModelPosition:this.getModelPosition.bind(this),panToPoint:this.panToPoint.bind(this),panDelta:this.panDelta.bind(this),panDeltaPercent:this.panDeltaPercent.bind(this),panDeltaAbsolute:this.panDeltaAbsolute.bind(this)},this.config.api.next(this.api),this.config.freeMouseWheel){this.scale=this.getCssScale(this.config.initialZoomLevel);var t=this.config.zoomLevels-1;this.maxScale=this.getCssScale(t),this.minScale=this.getCssScale(0)}switch(this.minimumAllowedZoomLevel=0,this.config.keepInBounds&&(this.minimumAllowedZoomLevel=this.config.neutralZoomLevel,this.minScale=this.getCssScale(this.config.neutralZoomLevel)),this.acceleratedFrameRef=this.zoomElementRef,this.acceleratedFrameRef.nativeElement.style.willChange="transform",navigator.userAgent.search("Chrome")>=0&&(this.isChrome=!0,this.acceleratedFrameRef.nativeElement.style.transform="translateZ(0)"),this.animationTick(performance.now()),this.scale=this.getCssScale(this.base.zoomLevel),this.isFirstSync=!1,this.config.dragMouseButton){case"left":this.dragMouseButton=0;break;case"middle":this.dragMouseButton=1,this.zone.runOutsideAngular(function(){return e.frameElementRef.nativeElement.addEventListener("auxclick",e.preventDefault)});break;case"right":this.zone.runOutsideAngular(function(){return document.addEventListener("contextmenu",e.preventDefault)}),this.dragMouseButton=2;break;default:this.dragMouseButton=0}},e.prototype.ngAfterViewInit=function(){var e=this;this.jQueryFrameElement=$(".pan-zoom-frame"),this.contentHeight=$(".zoomElement").children().height(),this.contentWidth=$(".zoomElement").children().width(),this.frameHeight=this.jQueryFrameElement.height(),this.frameWidth=this.jQueryFrameElement.width(),this.zone.runOutsideAngular(function(){return e.animationFrameFunc=window.requestAnimationFrame}),this.isMobileDevice()?(this.isMobile=!0,this.zone.runOutsideAngular(function(){return e.frameElementRef.nativeElement.addEventListener("touchstart",e.onTouchStart)})):(this.zone.runOutsideAngular(function(){return e.frameElementRef.nativeElement.addEventListener("mousedown",e.onMousedown)}),this.zone.runOutsideAngular(function(){return e.frameElementRef.nativeElement.addEventListener("dblclick",e.onDblClick)}),this.zone.runOutsideAngular(function(){return e.frameElementRef.nativeElement.addEventListener("wheel",function(t){return e.animationFrameFunc(function(){return e.onMouseWheel(t)})},{passive:!0})}))},e.prototype.ngOnDestroy=function(){var e=this;switch(this.isMobile?this.frameElementRef.nativeElement.removeEventListener("touchstart",this.onTouchStart):(this.frameElementRef.nativeElement.removeEventListener("mousedown",this.onMousedown),this.frameElementRef.nativeElement.removeEventListener("wheel",function(t){return e.animationFrameFunc(function(){return e.onMouseWheel(t)})},{passive:!0}),this.frameElementRef.nativeElement.removeEventListener("dblclick",this.onDblClick)),this.animationFrameFunc&&this.animationId&&window.cancelAnimationFrame(this.animationId),this.config.dragMouseButton){case"middle":this.dragMouseButton=1,this.zone.runOutsideAngular(function(){return e.frameElementRef.nativeElement.removeEventListener("auxclick",e.preventDefault)});break;case"right":this.zone.runOutsideAngular(function(){return document.removeEventListener("contextmenu",e.preventDefault)}),this.dragMouseButton=2}},e.prototype.isParentElement=function(e,t){for(var n=t.parentNode;null!=n;){if(n.classList&&n.classList.contains(e))return!0;n=n.parentNode}return!1},e.prototype.updateDOM=function(){if(this.animationParams){this.model.zoomLevel=this.base.zoomLevel+this.animationParams.deltaZoomLevel*this.animationParams.progress;var e=this.animationParams.panStepFunc(this.model.zoomLevel);if(this.model.pan.x=this.base.pan.x+e.x,this.model.pan.y=this.base.pan.y+e.y,this.config.keepInBounds){var t=this.getViewPosition({x:0,y:0}),n=this.getViewPosition({x:this.contentWidth,y:this.contentHeight});t.x>0&&(this.model.pan.x=0),t.y>0&&(this.model.pan.y=0),n.x<this.contentWidth&&(this.model.pan.x-=n.x-this.contentWidth),n.y<this.contentHeight&&(this.model.pan.y-=n.y-this.contentHeight)}}if(this.animationParams||this.isFirstSync){var i="scale("+this.getCssScale(this.model.zoomLevel)+")";this.zoomElementRef.nativeElement.style.transformOrigin="0 0",this.zoomElementRef.nativeElement.style.transform=i}var o="translate3d("+this.model.pan.x+"px, "+this.model.pan.y+"px, 0)";this.panElementRef.nativeElement.style.transform=o},e.prototype.freeZoom=function(e,t){if(!this.isDragging){this.animationParams&&(this.animationParams=null),this.panVelocity&&(this.dragFinishing=!1,this.panVelocity=null);var n=this.base.pan.x,i=this.base.pan.y,o=this.scale,a=this.scale+t*this.config.freeMouseWheelFactor*this.scale;a=Math.max(this.minScale,Math.min(this.maxScale,a)),this.scale=a;var s={x:e.x-a/o*(e.x-n),y:e.y-a/o*(e.y-i)},l="translate3d("+s.x+"px, "+s.y+"px, 0)";this.panElementRef.nativeElement.style.transform=l;var r="scale("+this.scale+")";this.zoomElementRef.nativeElement.style.transformOrigin="0 0",this.zoomElementRef.nativeElement.style.transform=r,this.isChrome&&(this.willChangeNextFrame?this.acceleratedFrameRef.nativeElement.style.willChange="auto":this.acceleratedFrameRef.nativeElement.style.willChange="transform",this.willChangeNextFrame=!this.willChangeNextFrame),this.model.pan.x=s.x,this.model.pan.y=s.y,this.model.zoomLevel=this.getZoomLevel(this.scale),this.syncBaseToModel(),this.config.modelChanged.next(this.model)}},e.prototype.isMobileDevice=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")},e.prototype.syncBaseToModel=function(){this.base.pan.x=this.model.pan.x,this.base.pan.y=this.model.pan.y,this.base.zoomLevel=this.model.zoomLevel},e.prototype.length=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},e.prototype.getCenterPoint=function(){return{x:this.frameElementRef.nativeElement.offsetWidth/2,y:this.frameElementRef.nativeElement.offsetHeight/2}},e.prototype.getCssScale=function(e){return Math.pow(this.config.scalePerZoomLevel,e-this.config.neutralZoomLevel)},e.prototype.getZoomLevel=function(e){return Math.log10(e)/Math.log10(this.config.scalePerZoomLevel)+this.config.neutralZoomLevel},e.prototype.calcZoomToFit=function(e){var t=this.frameElementRef.nativeElement.offsetWidth,n=this.frameElementRef.nativeElement.offsetHeight,i=e.width,o=e.height,a=Math.min(t/i,n/o),s=this.getZoomLevel(a)*this.config.zoomToFitZoomLevelFactor,l=this.getCssScale(s);return{zoomLevel:s,pan:{x:-e.x*l+(t-i*l)/2,y:-e.y*l+(n-o*l)/2}}},e.prototype.zoomToFitModel=function(e,t){void 0===t&&(t=null),this.animateToTarget(e,t)},e.prototype.zoomToLevelAndPoint=function(e,t){this.changeZoomLevel(e,t)},e.prototype.zoomInToLastClickPoint=function(){this.changeZoomLevel(this.base.zoomLevel+this.config.zoomButtonIncrement,this.lastClickPoint)},e.prototype.zoomOutFromLastClickPoint=function(){this.changeZoomLevel(this.base.zoomLevel-this.config.zoomButtonIncrement,this.lastClickPoint)},e.prototype.startAnimation=function(){var e=this;this.lastTick=performance.now(),this.zone.runOutsideAngular(function(){return e.animationId=e.animationFrameFunc(e.animationTick)})},e.prototype.getViewPosition=function(e){var t,n;if(this.animationParams){t=this.getCssScale(this.base.zoomLevel+this.animationParams.deltaZoomLevel*this.animationParams.progress);var i=this.animationParams.panStepFunc(this.model.zoomLevel);n={x:this.base.pan.x+i.x,y:this.base.pan.y+i.y}}else t=this.getCssScale(this.base.zoomLevel),n=this.base.pan;return{x:e.x*t+n.x,y:e.y*t+n.y}},e.prototype.getModelPosition=function(e){var t=e,n=this.getCssScale(this.base.zoomLevel),i=this.base.pan;return{x:1/n*(t.x-i.x),y:1/n*(t.y-i.y)}},e.prototype.resetView=function(){this.config.initialZoomToFit?this.zoomToFit(this.config.initialZoomToFit):null!==this.config.initialPanX&&null!==this.config.initialPanY&&null!==this.config.initialZoomLevel?this.zoomToFitModel({zoomLevel:this.config.initialZoomLevel,pan:{x:this.config.initialPanX,y:this.config.initialPanY}}):(console.error("PanZoomComponent: resetView() could not reset view as some vars were not set.  The culprits are either config.initialZoomLevel, config.initialPanX, or config.initialPanY.  Or just set panzoomConfig.initialZoomToFit"),console.log("config.initialZoomLevel: "+this.config.initialZoomLevel),console.log("config.initialPanX: "+this.config.initialPanX),console.log("config.initialPanY: "+this.config.initialPanY))},e.prototype.zoomToFit=function(e,t){void 0===t&&(t=null);var n=this.calcZoomToFit(e);this.animateToTarget(n,t)},e.prototype.zoomIn=function(e){this.changeZoomLevel(this.base.zoomLevel+this.config.zoomButtonIncrement,e)},e.prototype.zoomOut=function(e){this.changeZoomLevel(this.base.zoomLevel-this.config.zoomButtonIncrement,e)},e.prototype.panToPoint=function(e,t){void 0===t&&(t=null);var n={pan:{x:this.frameWidth/2-e.x*this.scale,y:this.frameHeight/2-e.y*this.scale},zoomLevel:this.base.zoomLevel};this.animateToTarget(n,t)},e.prototype.panDelta=function(e,t){void 0===t&&(t=null);var n={pan:{x:this.base.pan.x-this.scale*e.x,y:this.base.pan.y-this.scale*e.y},zoomLevel:this.base.zoomLevel};this.animateToTarget(n,t)},e.prototype.panDeltaAbsolute=function(e,t){void 0===t&&(t=null);var n={pan:{x:this.base.pan.x-e.x,y:this.base.pan.y-e.y},zoomLevel:this.base.zoomLevel};this.animateToTarget(n,t)},e.prototype.panDeltaPercent=function(e,t){void 0===t&&(t=null);var n=0,i=0;0!==e.x&&(n=this.contentWidth*(e.x/100)*this.scale),0!==e.y&&(i=this.contentHeight*(e.y/100)*this.scale);var o={pan:{x:this.base.pan.x-n,y:this.base.pan.y-i},zoomLevel:this.base.zoomLevel};this.animateToTarget(o,t)},e.prototype.animateToTarget=function(e,t){var n=this;if(void 0===t&&(t=null),!this.animationParams){this.zoomLevelIsChanging=!1,this.base.zoomLevel!==e.zoomLevel&&(this.zoomLevelIsChanging=!0);var i=e.zoomLevel-this.base.zoomLevel,o=this.base.pan.x,a=this.base.pan.y;this.model.pan.x=this.base.pan.x,this.model.pan.y=this.base.pan.y;t?t*=1e3:t=1e3*this.config.zoomStepDuration,this.animationParams={deltaZoomLevel:i,panStepFunc:function(t){return{x:-(o-e.pan.x)*n.animationParams.progress,y:-(a-e.pan.y)*n.animationParams.progress}},duration:t,progress:0},this.startAnimation()}},e.prototype.changeZoomLevel=function(e,t){var n=this;if(!this.animationParams){this.zoomLevelIsChanging=!0,e=Math.max(this.minimumAllowedZoomLevel,e);var i=(e=Math.min(this.config.zoomLevels-1,e))-this.base.zoomLevel;if(i){var o=this.base.pan.x,a=this.base.pan.y,s=this.scale,l=t||this.getCenterPoint();this.animationParams={deltaZoomLevel:i,panStepFunc:function(e){var t=n.getCssScale(e),i=l.x-t/s*(l.x-o),r=l.y-t/s*(l.y-a);return{x:i-o,y:r-a}},duration:1e3*this.config.zoomStepDuration,progress:0},this.startAnimation()}}},e.decorators=[{type:t.Component,args:[{selector:"pan-zoom",template:'\n<div #frameElement class="pan-zoom-frame" style="position:relative; width: 100%; height: 100%; overflow: hidden;">\n  <div #panElement class="panElement" style="position: absolute; left: 0px; top: 0px;">\n    <div #zoomElement class="zoomElement">\n      <ng-content></ng-content>\n    </div>\n  </div>\n</div>\n<div #panzoomOverlay style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; opacity: 0; display: none; pointer-events: none;"></div>\n  '}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.NgZone}]},e.propDecorators={frameElementRef:[{type:t.ViewChild,args:["frameElement",{"static":!0}]}],panElementRef:[{type:t.ViewChild,args:["panElement",{"static":!0}]}],zoomElementRef:[{type:t.ViewChild,args:["zoomElement",{"static":!0}]}],panzoomOverlayRef:[{type:t.ViewChild,args:["panzoomOverlay",{"static":!0}]}],config:[{type:t.Input}]},e}(),a=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[],declarations:[o],providers:[],exports:[o]}]}],e}();e.Ng2PanZoomModule=a,e.PanZoomComponent=o,e.PanZoomConfig=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng2-panzoom.umd.min.js.map